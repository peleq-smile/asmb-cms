{% extends 'partials/_master.twig' %}

{% block main %}
    {% setcontent homepage = "homepage" limit 1 returnsingle %}

    <div class="homepage">
        <section class="section welcome">
            <div class="container">
                <div class="columns white-framed">
                    <div class="column is-two-thirds">
                        <div class="content">
                            <h2 class="title is-size-1 is-size-3-mobile">{{ homepage.title }}</h2>
                            <div class="teaser">{{ homepage.teaser }}</div>
                            {{ homepage.content }}

                            {% include 'partials/_record_meta.twig' with {'record': homepage } %}
                        </div>
                    </div>
                    <div class="column">
                        {% if homepage.teaser_image %}
                            {{ showimage(homepage.teaser_image) }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>

        {# TOP BLOCKS #}
        {% setcontent blocks = 'block' where { etiquettes: 'accueil-top' } %}
        {% if blocks is not empty %}
            <section class="section hero">
                <div class="container">
                    {% for block in blocks %}
                        {% include 'partials/block/_block.twig' with {'block': block, 'index': loop.index} %}
                    {% endfor %}
                </div>
            </section>
        {% endif %}


        {#{% setcontent events = 'evenement' where { etiquettes: 'accueil-top' } %}#}
        {#{% if events is not empty %}#}
            {#<section class="section hero">#}
                {#<div class="container">#}
                    {#{% for event in events %}#}
                        {#{% include 'partials/block/_event.twig' with {'event': event} %}#}
                    {#{% endfor %}#}
                {#</div>#}
            {#</section>#}
        {#{% endif %}#}

        {# Rencontres du moment #}
        {% include 'partials/home/_current_matches.twig' with {'record': homepage } %}

        {# Pages section #}

        {#<section class="section section-pages hero is-primary">#}
            {#<div class="container">#}
                {#<h2 class="title">Pages</h2>#}
                {#<div class="columns">#}
                    {#{% setcontent pages = 'pages/latest/3' %}#}
                    {#{% for page in pages %}#}
                        {#<div class="column">#}
                            {#<div class="card">#}
                                {#<div class="card-image">#}
                                    {#<figure class="image is-3by2">#}
                                        {#{{ popup(page.values.image, 480, 320) }}#}
                                    {#</figure>#}
                                {#</div>#}
                                {#<div class="card-content content">#}
                                    {#<h3><a href="{{ page.link() }}">{{ page.title }}</a></h3>#}
                                    {#<p>{{ page.excerpt }}</p>#}
                                    {#<a class="button is-primary" href="{{ page.link() }}">#}
                                        {#{{ __('general.phrase.read-more') }}#}
                                    {#</a>#}
                                {#</div>#}
                            {#</div>#}
                        {#</div>#}
                    {#{% else %}#}
                        {#<div class="column">#}
                            {#<p>{{ __("general.phrase.no-content-found") }}</p>#}
                        {#</div>#}
                    {#{% endfor %}#}
                {#</div>#}
            {#</div>#}
        {#</section>#}


        {#{% include "partials/_sub_recent_records.twig" %}#}

        {# Latest entries #}
        {#<section class="section section-latest-entries">#}
            {#<div class="container">#}
                {#<h2 class="title">Latest Entries</h2>#}
                {#{% setcontent entries = 'entries/latest/3' %}#}
                {#{% for entry in entries %}#}
                    {#<article role="article" class="media columns">#}
                        {#<div class="media-content column is-7">#}
                            {#<div class="content">#}
                                {#<h3><a href="{{ entry.link }}">{{ entry.title }}</a></h3>#}
                                {#{{ entry.teaser }}#}

                                {#{% include 'partials/_record_meta.twig' with {'extended': true, 'record': entry} %}#}
                            {#</div>#}
                        {#</div>#}
                        {#<div class="media-right column">#}
                            {#<figure class="image">#}
                                {#{{ popup(entry.values.image, 480, 320) }}#}
                            {#</figure>#}
                        {#</div>#}
                    {#</article>#}
                {#{% else %}#}
                    {#<p>{{ __("general.phrase.no-content-found") }}</p>#}
                {#{% endfor %}#}
                {#<div class="buttons has-addons is-right">#}
                    {#<a class="button is-primary" href="{{ path('contentlisting', {'contenttypeslug': 'entries'}) }}">Read#}
                        {#more <span class="is-hidden"> Entries</span></a>#}
                {#</div>#}
            {#</div>#}
        {#</section>#}
    </div>
{% endblock main %}
